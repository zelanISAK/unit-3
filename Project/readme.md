# Unit 3. Expenses Tracker App for Ms. Emmy Abella 


# Criteria A: Planning
## Problem Definition

Emmy Abella Domingues is an 18-year-old IB Year 1 student from Brazil. As an international & boarding student in UWC ISAK Japan, money management is a major aspect of her life. Although Emmy easily keep tracks of her income or cash inflow, she finds it hard to keep track of her expenses. Specifically, she finds it difficult to note what, when, and how much she spends on.

The client, Emmy Domingues, is in need of an app that keeps track of her expenses. In addition, the client requires the app to be encrypted through a login system, for the data to be stored in a database, and for the user interface to be clear, concise, and most importantly attractive by using the client's favorite color, pink.

## Design Statement
I will design and develop a digital expenses ledger for Emmy Abella Domingues da Silva who is struggling to keep track of her expenses as an international student. The proposed solution is an application programmed using the Python programming language, KivyMD for the Graphic User Interface (GUI) construction, and SQLite for local database[3]. The program will be developed and completed in a span of 4 weeks and will be evaluated based on the success criteria stated prior to this statement; the success criteria are objectives to be met by the developer approved by the client based on their needs and preferences.

## Rationale for Proposed Solution
The proposed solution is an expense tracking application that allows users to keep track of their expenses, categorize them into the client's main expenditure type (Food, Transportation, Emergency & Healthcare, Leisure, and Miscellaneous), and monitor their spending. The app is necessary for people who want to stay on top of their finances and make informed financial decisions. The app provides users with a comprehensive overview of their spending habits, which is crucial for budgeting, planning, and saving.

The app includes a login & register system to provide an added layer of security by ensuring that only authorized users can access the app and its data. It also ensures that the user's data is private and personal to the authorized user, protecting sensitive information such as financial data, personal details, and transaction history. The user interface uses a color scheme that only includes colors in the shade of pink, as per request of the client. The interface is clear, concise, and attractive, making it easy for users to navigate and use the app. The app allows the user to add entries as the expense tracking app's basic functionality. In addition, it allows users to edit and delete entries just in case the user inputs an entry wrongly the first time.

The developer shall use Python, a popular programming language widely used in the development of web applications, scientific computing, and data analysis[1]. The developer chose Python as it is a versatile language that is easy to learn and has a large community of developers who contribute to its development. Along with Python is kivyMD, a Python-based library use for developing user interfaces. The developer chose kivyMD because it is open source and it is a popular choice for app development among the Python developers community, due to its apparent simplicity, flexibility, and scalability. kivyMD provides a wide range of widgets, animations, and effects, making it easy to develop attractive and responsive user interfaces[2]. Lastly, SQLite is chosen for the application's database management system due to its simplicity, reliability, and portability. SQLite offers a lightweight database management system and can be integrated with Python. SQLite is also scalable, meaning it can handle large amounts of data and is suitable for developing an expense tracking app. It is self-contained thus a separate server is not required.

In summary, the proposed solution is an expense tracking app that is necessary for people who want to stay on top of their finances. The app includes a login system, a database management system, a user interface, expense tracking, encryption, and personalization. Python, kivyMD, and SQLite are the best choices for developing the app because of their simplicity, flexibility, and reliability.


## Success Criteria
1. The solution is an application that provides a presentation of the user's expenses in a tabular format.
2. The application is able to add, edit, or delete entries to the app's database and present these changes. Each entry stores the date automatically, the amount spent, and the category of the expense.
3. The data table automatically converts the JPY amount to BZR to enable the user to visualize how much she spent in the currency she is used in.
3. The application is kept secure by embedding a log in system and a registration system to add users.
4. The user's data of expenses are stored in a SQLLite database.
5. The application is up to the user's visual standard by using only shades of the user's favorite color, pink.
6. The user's expenses are categorized into Food, Transportation, Emergency, Leisure, and Others. 


# Criteria B: Design
## Diagrams

### System Diagrams
![](src/media/system_diagram.jpg)

*Fig. 1 System Diagram of the spent.io app*
### Wireframes
![](src/media/wireframe.jpg)

*Fig. 2 Wireframe of the spent.io app created on Adobe XD*


### UML Diagram
![](src/media/uml_diagram.png)

*Fig. 3 UML Diagram of the spent.io app*

Figure 3 shows the classes and methods found in each class used to develop the application. The classes exhibit in either three parent classes found in the KivyMD Library: MDApp, MDScreen, and MDBoxLayout. All subclasses inherit methods and attributes from these parent classes.

### ER Diagram
![](src/media/er_diagram.jpg)

*Fig 4. ER diagram of the spent.io app database spentio.db(SQLite).*

Figure 4 shows the different entities involved in the app's database and how these different entities relate to each other. Here, we can see that the SQLite database has two tables called ledger and users. The users database stores all the user's account information (hashed password, email, and username) and for each user registered in the users table, there are entries in the ledger table that belong only to that specific user.


### Flowcharts
**Registration System**
*Fig 5. Flowchart of the spent.io app entry editing algorithm*

**Add Entry**

*Fig 6. Flowchart of the spent.io app entry addition algorithm*
**Entry Editing**
![](src/media/fc_1.jpg)

*Fig 7. Flowchart of the spent.io app entry editing algorithm*



## Record of Tasks
| Task No | Planned Action                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Planned Outcome                                                                                                                                                                                                                                                                                                                                                                                     | Time estimate | Target completion date | Criterion |
|---------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|------------------------|-----------|
| 1       | Identify & interview the client                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                     | 6 min         | Feb 9                  | A         |
| 2       | Write the context of the problem                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Establish the problem identified in a clear and concise manner. The problem definition must include who the client is, what the client wants, and indicate a possible solution.                                                                                                                                                                                                                     | 15 min        | Feb 9                  | A         |
| 3       | Brainstorm and write a proposed solution for the problem. Rationalize this solution for the client.                                                                                                                                                                                                                                                                                                                                                                                            | Explain in a concise and clear manner the purpose of the project to the client                                                                                                                                                                                                                                                                                                                      | 5 min         | Feb 9                  | A         |
| 4       | Write the success criteria of the proposed solution.                                                                                                                                                                                                                                                                                                                                                                                                                                           | A clear set standards to be met by the developer, that suits the client's needs and preferences.                                                                                                                                                                                                                                                                                                    | 15 min        | Feb 10                 | A         |
| 5       | Meet with the client to confirm or revise success criteria.                                                                                                                                                                                                                                                                                                                                                                                                                                    | Confirmed success criteria and ensure it meets the client's standards.                                                                                                                                                                                                                                                                                                                              | 15 min        | Feb 10                 | A         |
| 6       | Write a design statement for the proposed solution 'spent.io'                                                                                                                                                                                                                                                                                                                                                                                                                                  | A coherent design statement that outlines the plan for the project.                                                                                                                                                                                                                                                                                                                                 | 20 min        | Feb 10                 | A         |
| 7       | Draw a system diagram for the proposed app solution: 'spent.io'                                                                                                                                                                                                                                                                                                                                                                                                                                | Have a concrete idea of the software and hardware requirements involved in the development of the application.                                                                                                                                                                                                                                                                                      | 10 min        | Feb 10                 | B         |
| 8       | Plan & create the wireframe for the proposed solution: 'spent.io'. The wireframe includes 3 screens: Login Screen, Registration Screen, and Main Screen. This wireframe plan must include the widgets to be shown, components (ex. Dialog, MDButton), dimensions of each screens, components, and color schemes. This must also outline the transition from one screen to another and how this is done. More importantly, the planned wireframe must align with the client's success criteria. | Have a detailed visual representation of the project which also serves as a guide for the developer during the programming process.                                                                                                                                                                                                                                                                 | 60 min        | Feb 11                 | B         |
| 9       | Develop the `database_handler` class which enables the developer to use SQLite with Python further.                                                                                                                                                                                                                                                                                                                                                                                            | The `database_handler` class has the attributes `connection` which connects to an existing SQLite database named "spentio.db" and `cursor`. The class includes the following methods:`create_tables`,`run_query`,`close`, `insert`,`search`,`test_login`,and `test_register`.                                                                                                                       | 45 min        | Feb 13                 | C         |
| 10      | Develop the Login Screen GUI for the proposed app 'spent.io' based on the planned Wireframe using Python and the KivyMD Library.                                                                                                                                                                                                                                                                                                                                                               | A screen containing text fields which allows the user to input log in credentials.                                                                                                                                                                                                                                                                                                                  | 30 min        | Feb 13                 | C         |
| 11      | Develop the`LoginScreen` class in the spentio.py file which inherits from a KivyMD Component `MDScreen`. This class shall have an attribute called `dialog` originally set to None.                                                                                                                                                                                                                                                                                                            | A secure program allowing the user to login to the application using an existing username or email and password.                                                                                                                                                                                                                                                                                    | 50 min        | Feb 14                 | C         |
| 12      | Develop password encryption secure_password.py                                                                                                                                                                                                                                                                                                                                                                                                                                                 | A python file containing the `encrypt_password` class which take's a user's password and encrypt it using sha256 before being strored in the SQLite database spentio.db                                                                                                                                                                                                                             | 45 min        | Feb 16                 | C         |
| 13      | Develop the Registration Screen GUI for the proposed app 'spent.io' based on the planned Wireframe.                                                                                                                                                                                                                                                                                                                                                                                            | Have a screen that follows the Wireframe Diagram and allows the user to register a new account. In this step however, the screen is still limited given that it's still merely a GUI, with no methods connected to its graphic components whatsoever.                                                                                                                                               | 45 min        | Feb 16                 | C         |
| 14      | Develop the `RegistrationScreen` class in the spentio.py file.                                                                                                                                                                                                                                                                                                                                                                                                                                 | Have a screen that allows the user to register a new account (username, email, and password) and save these data into the 'users' table of an SQLite database titled 'spentio.db'                                                                                                                                                                                                                   | 120 min       | Feb 16                 | C         |
| 15      | Design button icons on Canva for the MainScreen GUI.                                                                                                                                                                                                                                                                                                                                                                                                                                           | Four button png images are created. A '+' icon button to represent entry addition, a button with a pencil icon to represent entry edit, a trash icon button to represent entry deletion, and a logout icon to represent logging out.                                                                                                                                                                | 20 min        | Feb 17                 | C         |
| 16      | Develop the MainScreen GUI for the proposed app 'spent.io' based on the planned Wireframe.                                                                                                                                                                                                                                                                                                                                                                                                     | A screen featuring the app logo, name, and the buttons previously created.                                                                                                                                                                                                                                                                                                                          | 30 min        | Feb 17                 | C         |
| 17      | Develop a DataTable showing data from the `ledger` table from spentio.db and present this on the Main Screen page.                                                                                                                                                                                                                                                                                                                                                                             | A data table that shows data from the 'ledger' table of the 'spentio.db' can be seen on the Main Screen.                                                                                                                                                                                                                                                                                            | 45 min        | Feb 20                 | C         |
| 18      | Develop the `MainScreen` class in the spentio.py file.                                                                                                                                                                                                                                                                                                                                                                                                                                         | This class includes methods (further explained in this documentation's Computation Thinking section) that allows the user to use the main functionalities of the app.                                                                                                                                                                                                                               | 2 hours       | Feb 20                 | C         |
| 19      | Develop methods in the `MainScreen` class to enable the 'Add Entry' button to function on the Main Screen. This includes an MDDialog that asks for the user's expense (integer) through a TextField and expense category through a group of checkboxes that accepts one input. This dialog has two buttons: 'CANCEL' to cancel entry and go back to MainScreen, and 'OK' to add entry to the database.                                                                                         | When the 'Add Entry' icon button is clicked, a Dialog opens to ask for user input. The inputs are validated and when valid, after the user presses 'OK', the dialog closes and data is stored in the 'ledger' table of the spentio.db SQLite database. These changes in the database are reflected on the Data Table.                                                                               | 50 min        | Feb 21                 | C         |
| 20      | Develop methods in the `MainScreen` to enable the 'Edit Entry' button to function on the Main Screen.                                                                                                                                                                                                                                                                                                                                                                                          | A checkbox is clicked on the Data Table. Once the 'Edit Entry' icon button is clicked, a Dialog opens to ask for user input. The inputs are validated and when valid, after the user presses 'OK', the dialog closes and row of data checked by the user previously is now updated with the newly inputted entries. These changes are also reflected on the SQLite database, spentio.db ledger table. | 1 hour        | Feb 22                 | C         |
| 21      | Develop methods in the `MainScreen` to enable the `Delete Entry` button to function on the Main Screen.                                                                                                                                                                                                                                                                                                                                                                                        | Once the user picks entries on the data table by ticking off check boxes and the delete entry icon button is pressed, entries are deleted and are no longer shown in the data table. These entries/rows are also deleted on the SQLite database spentio.db ledger table.                                                                                                                            | 20 min        | Feb 24                 | C         |
| 22      | Develop a widget on the MainScreen to allow the user to look through the database based on the Category.                                                                                                                                                                                                                                                                                                                                                                                       | Once pressed, rows of text buttons with expense categories as titles are shown. Once one of the buttons is pressed, the Data Table automatically only shows entries/rows under that certain category.                                                                                                                                                                                               | 40 min        | Feb 24                 | C         |
| 23      | Develop a button on the Main Screen that allows the user to logout.                                                                                                                                                                                                                                                                                                                                                                                                                            | The logout button logs out the user and takes them back to the first page which is the Login Screen.                                                                                                                                                                                                                                                                                                | 20 min        | Feb 24                 | C         |
| 24      | Write the test plan.                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Have a clear idea of factors and components of the app to look into, and see whether these are up to standard.                                                                                                                                                                                                                                                                                      | 30 min        | Feb 26                 | B         |
| 25      | Beta Testing                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Gauge the app's functionality, security, and visual layout by having the client, Emmy Abella, test the app. Take notes of certain comments, suggestions, and concerns and present app amendments to the user.                                                                                                                                                                                       | 15 min        | Feb 28                 | C         |
| 26      | Beta Development: Login Screen & Registration Screen input validation.                                                                                                                                                                                                                                                                                                                                                                                                                         | Code changes into the app based on feedback given by client from the previous step.                                                                                                                                                                                                                                                                                                                 | 80 min        | Feb 28                 | C         |
| 27      | Rewrite the test plan.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Update the test plan with the new components developed after client's feedback.                                                                                                                                                                                                                                                                                                                     | 30 min        | Mar 1                  | B         |
| 28      | Testing (using revised test plan)                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Use the test plan. By this point, it is expected for every component stated to be up to standard.                                                                                                                                                                                                                                                                                                   | 30 min        | Mar 2                  | C         |
| 29      | Create flow diagrams of chunks of the code on spentio.py and write brief explanataions for each.                                                                                                                                                                                                                                                                                                                                                                                               | Have accurate and comprehensive representations of how parts of the program/code works with brief explanations.                                                                                                                                                                                                                                                                                     | 40 min        | Mar 5                  | B         |
| 30      | Meet with the client and present the final product.                                                                                                                                                                                                                                                                                                                                                                                                                                            | Meet with client to deliver the final product (the application).                                                                                                                                                                                                                                                                                                                                    | 20 min        | Mar 6                  | A         |
| 31      | Write & finish Criteria C.                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Write about the techniques and resources used in the code, and how these came to be.                                                                                                                                                                                                                                                                                                                | 40 min        | Mar 7                  | A         |
| 32      | Go through and revise the project's documentation.                                                                                                                                                                                                                                                                                                                                                                                                                                             | Ensure that the documentation is accurate, comperehensible for the client, and follows proper citations.                                                                                                                                                                                                                                                                                            | 40 min        | Mar 8                  | A         |
| 33      | Finish video for Criteria D.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | A video evidence of all the success criterias functioning and working within the developed application.                                                                                                                                                                                                                                                                                             | 30 min        | Mar 9                  | D         |


## Test Plan
| Test No | Test Type                                                                                                 | Date   | Procedure                                                                                                                                                                                                                                                                                                                       | Expected Outcome                                                                                                                                                                                                                                                                           |
|---------|-----------------------------------------------------------------------------------------------------------|--------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| 1       | Functional: Test  whether the SignUp screen succesfully registers new user if all entries are valid.      | Feb 18 | Run python file (spentio.py). Go to sign up screen and enter the following values: <br/>- email: bob@isak<br/>- username: bob<br/>-password: bob123                                                                                                                                                                             | When the database, spentio.db is checked, a new row of data can be seen. This row shows the entered email, username, and password encrypted using a certain hash.                                                                                                                          |  
| 2       | Functional: Test sign up screen when data inputted by user is invalid                                     | Feb 18 | Run spentio.py. Navigate to the SignUp Screen. Enter the following values:<br/>-  email: bob@isak<br/>- username: bob2<br/>-password: bob123                                                                                                                                                                                    | Once the sign up button is clicked and the user input is queried into the database, the application shows a dialog box that tells the user the exact error. In this case, since the email already exists due to the prior test step, the dialog will show "Email already exists. Please try again". |
| 3       | Functional: Data registered from a new user is stored securely in an SQLite Database.                     | Feb 18 | After Test step 1 and 2, open the sqllite database console and view the users table.                                                                                                                                                                                                                                            | The users table must have the email, username, and a hashed password.                                                                                                                                                                                                                      |
| 4       | Functional: Test registration screen with invalid input (empty fields)                                    | Feb 20 | username(''), email(''), pass1('bob'), pass2('12345')                                                                                                                                                                                                                                                                           | Feedback should be given to the user through a dialog stating the error ("Please input required fields").                                                                                                                                  |
| 5       | Functional: Test registration screen with invalid input (existing username)                               | Feb 20 | username('bob'), email('bob4@isak'), pass1('bob'), pass2('12345')                                                                                                                                                                                                                                                               | Feedback should be given to the user through a dialog stating the error ("Username already exists. Please try again").                                                                                                                                                                     |
| 6       | Functional: Test registration screen with invalid input (mismatched passwords)                            | Feb 20 | Input: username('bob4'), email('bob4@isak'), pass1('bob'), pass2('12345')                                                                                                                                                                                                                                                       | Feedback is given to the user by having the password text fields red.                                                                                                                                                                                                                      |
| 7       | Functional: Test registration screen with invalid input (existing email).                                 | Feb 20 | Input: username('bob4'), email('bob@isak'), pass1('bob'), pass2('12345')                                                                                                                                                                                                                                                        | Feedback should be given to the user through a dialog stating the error ("Email already exists. Please try again").                                                                                                                                                                        |
| 8       | Functional: Test Login screen with valid input.                                                           | Feb 20 | Input the username and password registered during test step 1.                                                                                                                                                                                                                                                                  | Once the login button is clicked, the app transitions to the Main Screen                                                                                                                                                                                                                   |
| 9       | Functional: Test login screen with invalid input (username that hasn't been registered prior).            | Feb 20 | Input a random username and password that haven't been registered to the application prior.                                                                                                                                                                                                                                     | The application shows a dialog box stating that the 'User does not exist'.                                                                                                                                                                                                                 |
| 10      | Functional: Test login screen with invalid input (existing username but wrong password)                   | Feb 20 | Input a previously registered username ('bob') or email ('bob@isak') and input a wrong or random password ('12345').                                                                                                                                                                                                            | The appplication's password textfield turns red.                                                                                                                                                                                                                                           |
| 11      | Non-functional: Test the application's graphic interface with the client.                                 | Feb 21 | Communicate with the client, Emmy Abella Domingues da Silva during Computer Science class.                                                                                                                                                                                                                                      | The client approves of the color scheme, layout, and features of the application.                                                                                                                                                                                                          |
| 12      | Functional: Database is shown in the database.                                                            | Feb 25 | Run spentio.py. Log in using valid inputs ('bob' and 'bob123' respectively). The Main Screen opens after a successful log in.                                                                                                                                                                                                   | The main screen shows a data table showing data from a table in SQLLite. This datatable contains the following columns: checker, number, date, category, and amount.                                                                                                                       |
| 13      | Functional: Add Entry                                                                                     | Feb 26 | On the main screen, click on the '+' button. There should be a dialogue shown, asking for an amount and for the user to click the category. Once done, click 'ok' to close dialog.                                                                                                                                              | Once new entry input is done, the datatable should be updated and the new entry should come up.                                                                                                                                                                                            |
| 14      | Functional: Delete Entry                                                                                  | Mar 1  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 15      | Functional: Edit Entry                                                                                    | Mar 1  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 16      | Functional: Validate new/edited entry                                                                     | Mar 2  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 17      | Functional: View by Category button                                                                       | Mar 3  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 18      | Functional: Logout                                                                                        | Mar 3  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 19      | Top-down Integration Testing                                                                              | Mar 5  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 20      | Bottom-up Integration Testing                                                                             | Mar 6  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |
| 21      | Non-functional: Code Review. Review if the code has adequate comments, function ames, and variable names. | Mar 8  |                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                                                                                                                                                            |



# Criteria C: Development
## Existing Tools
**Software Development Tools**
* Pycharm
* Python 
* SQLite
* CHatGPt

**Python Libraries/Modules**
* KivyMD - a collection of widgets to create Graphic User Interfaces using Python
* Time -  a Python module that provides various time-related functions
* Datetime - a Python module that supplies classes for manipulating dates & times
* Passlib - a password hashing library for Python 2&3 

## Techniques Applied
1. Object Oriented Programming (OOP): Classes, Inheritance, Methods, Attributes
2. Object Relation Mapping (ORM): SQLAlchemy
3. KivyMD: Dialog, BoxLayout, Label, TextField, Checker, Spinner, Buttons
4. Password Encryption: Passlib CryptContext class (sha256 hashing algorithm)
3. Variables
4. For loops
5. if, elif, and else statements
6. Database interaction
7. Text Formatting
7. Functions
8. Calling KivyMd components using id

## Computational Thinking - sqlite console
**users table**
```pycon

```

**ledger table**
```pycon

```

## Computational Thinking - .py
**Connecting to SQL**
```pycon

```

**Password Encryption**
```pycon

```

**Register (w/ Validation)**
```pycon

```

**Log in (w/ Validation)**
```pycon

```
**Add Entry**
```pycon

```

**Edit Entry**
```pycon

```

**Delete Entry**
```pycon

```

**Log out**
```pycon

```



## References

[^1]: Python , "https://www.python.org/."

[^2]: KivyMD , "https://kivymd.readthedocs.io/en/1.1.1/."

[^3]: SQLite , "https://www.sqlite.org/index.html."

[^4]: Codemy , "https://www.youtube.com/watch?v=tToJBfDgCsc&ab_channel=Codemy.com".

[^5]: Datetime , "https://docs.python.org/3/library/datetime.html"

# Criteria D: Functionality
## Video
https://drive.google.com/file/d/1zlYApceWcf5DnEFbrumAMSg-eP5M6G76/view?usp=sharing 

